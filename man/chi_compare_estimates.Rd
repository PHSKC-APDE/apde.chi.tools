% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/chi_compare_estimates.R
\name{chi_compare_estimates}
\alias{chi_compare_estimates}
\title{Compare and validate CHI (Community Health Indicator) estimates between two datasets}
\usage{
chi_compare_estimates(
  OLD = NULL,
  NEW = NULL,
  OLD.year = NULL,
  NEW.year = NULL,
  META = NULL
)
}
\arguments{
\item{OLD}{data.frame/data.table containing the reference/baseline CHI estimates}

\item{NEW}{data.frame/data.table containing the CHI estimates to be validated}

\item{OLD.year}{Year to filter from the OLD dataset (e.g., "2022")}

\item{NEW.year}{Year to filter from the NEW dataset (e.g., "2023")}

\item{META}{data.frame/data.table containing metadata with indicator_key and
result_type columns for classifying comparison results}
}
\value{
data.table ordered by absolute difference, containing:

\itemize{
  \item Difference metrics (absolute_diff, relative_diff)
  \item All matching identifiers and categories
  \item Original values and metadata from both datasets
  \item Diagnostic information (bounds, numerators, denominators, standard errors)
}
}
\description{
Analyzes differences between two datasets containing CHI estimates, calculating both absolute
and relative differences between matched records. The function supports optional metadata
integration for result type classification.
}
\details{
The function performs the following operations:
\enumerate{
  \item Merges datasets using CHI-specific identifiers (indicator_key, tab, cat1, cat2, etc.)
  \item Calculates absolute differences (percentage points for non-rates, raw for rates)
  \item Calculates relative differences as percentages
  \item Identifies notable differences needing further exploration using standard CHI criteria
}
}
\examples{
\dontrun{
# Compare two versions of estimates
comparison <- chi_compare_estimates(
  OLD = previous_estimates,
  NEW = current_estimates,
  OLD.year = "2022",
  NEW.year = "2023",
  META = metadata
)
}

}
\seealso{
\code{\link{chi_qa_tro}} for validating individual datasets

\code{\link{chi_update_sql}} for uploading validated results
}
