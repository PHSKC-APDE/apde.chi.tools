% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/chi_calc.R
\name{chi_calc}
\alias{chi_calc}
\title{Calculate CHI Estimates}
\usage{
chi_calc(
  ph.data = NULL,
  ph.instructions = NULL,
  ci = 0.9,
  rate = FALSE,
  rate_per = NULL,
  small_num_suppress = TRUE,
  suppress_low = 0,
  suppress_high = 9,
  source_name = NULL,
  source_date = NULL
)
}
\arguments{
\item{ph.data}{data.frame or data.table. Input data containing analytic read data.}

\item{ph.instructions}{data.frame or data.table. Calculation instructions for processing.}

\item{ci}{numeric. Confidence level between 0 and 1. Default: \code{0.90}.}

\item{rate}{logical. If TRUE calculates rates, if FALSE calculates proportions. Default: \code{FALSE}.}

\item{rate_per}{numeric. Rate multiplier when \code{rate = TRUE} (e.g., 100000 for per 100,000). Default: \code{NULL}.}

\item{small_num_suppress}{logical. If TRUE suppresses small numbers. Default: \code{TRUE}.}

\item{suppress_low}{numeric. Lower bound for suppression. Default: \code{0}.}

\item{suppress_high}{numeric. Upper bound for suppression. Default: \code{9}.}

\item{source_name}{character. Name of data source. Default: \code{NULL}.}

\item{source_date}{Date. Date ph.data was created. Default: \code{NULL}.}
}
\value{
A data.table containing CHI estimates with the following columns:
\itemize{
  \item{\code{data_source}} Data source (e.g., acs, brfss, etc.)
  \item{\code{indicator_key}} Unique indicator key
  \item{\code{tab}} Type of analysis (e.g., demgroups, _kingcounty, etc.)
  \item{\code{year}} Year(s) of data
  \item{\code{cat1}} Describes data field (e.g., Gender, Ethnicity, etc.)
  \item{\code{cat1_group}} Demographics variables for cat1 (e.g., Female, Hispanic, etc.)
  \item{\code{cat1_varname}} cat1 variable name in the analytic data sets
  \item{\code{cat2}} Describes data field (e.g., Gender, Ethnicity, etc.)
  \item{\code{cat2_group}} Demographics variables for cat2 (e.g., Female, Hispanic, etc.)
  \item{\code{cat2_varname}} cat2 variable name in the analytic data sets
  \item{\code{result}} Calculated proportion/percent or rate
  \item{\code{lower_bound}} Lower bound of confidence interval
  \item{\code{upper_bound}} Upper bound of confidence interval
  \item{\code{se}} Standard error
  \item{\code{rse}} Relative standard error
  \item{\code{caution}} '!' when RSE>=30% | N == 0
  \item{\code{suppression}} '^' when suppressed
  \item{\code{numerator}} For line-level data, count of events; for surveys, people who responded yes or no for binary variable
  \item{\code{denominator}} For line-level data, population; for surveys, sample size
  \item{\code{chi}} '1' indicates that rows is used for CHI
  \item{\code{source_date}} date analytic ready data was created
  \item{\code{run_date}} date of this analysis
}
}
\description{
Generates CHI estimates from input data according to provided instructions. 
Handles both proportions and rates, with options for suppression of small numbers.
}
\seealso{
\code{\link{chi_generate_tro_shell}} for creating calculation instructions

\code{\link{chi_qa_tro}} for validating results

\code{\link{chi_generate_metadata}} for creating metadata from results
}
