% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/chi_generate_analysis_set.R
\name{chi_generate_analysis_set}
\alias{chi_generate_analysis_set}
\title{Generate Analysis Sets for CHI}
\usage{
chi_generate_analysis_set(data_source = NULL)
}
\arguments{
\item{data_source}{Character string (length 1) specifying the data source to analyze
(e.g., \code{'birth'}, \code{'brfss'}, \code{'chars'}, \code{'death'}, \code{'hys'}). This corresponds to a table
name in the PHExtractStore database.}
}
\value{
A data.table containing analysis sets with the following columns:
  \itemize{
    \item \code{set}: Integer identifying groups of indicators with identical analysis patterns
    \item \code{cat1}: Category name as expected in CHI TRO
    \item \code{cat1_varname}: Category variable name as expected in CHI TRO
    \item \code{_kingcounty}: \code{'x'} if analysis includes King County tab
    \item \code{_wastate}: \code{'x'} if analysis includes Washington State tab
    \item \code{demgroups}: \code{'x'} if analysis includes demographic groups
    \item \code{crosstabs}: \code{'x'} if analysis includes crosstabulations
    \item \code{trends}: \code{'x'} if analysis includes trends analysis
    \item \code{set_indicator_keys}: Comma-separated list of indicator keys sharing the pattern
  }
}
\description{
Creates sets of indicator keys that share common analysis patterns within CHI
(Community Health Indicators) data. This function reads the most recent production
version of CHI estimates for a specified data source and groups indicators that
use the same combinations of \code{cat1}, \code{cat1_varname}, and \code{trends}
columns.
}
\details{
This function generates a table for \code{\link{chi_generate_tro_shell}}, providing the
structure required for generating analysis instructions. It connects to the
\code{[PHExtractStore]} database on \code{KCITSQLPRPHIP40} to retrieve the latest production data.
Users need appropriate database credentials - contact your manager if you need access.

Typically, the analysis will not change from year to year. However, you should
compare the output of this function with the 'CHI-Variables_ByDataSource' worksheet
in
\href{https://kc1.sharepoint.com/teams/DPH-CommunityHealthIndicators/CHIVizes/CHI-Standards-TableauReady\%20Output.xlsx}{
SharePoint > Community Health Indicators > CHI_vizes > CHI-Standards-TableauReady Output.xlsx}
and update it as necessary.

The output structure directly informs \code{\link{chi_generate_tro_shell}} about which
indicators should be analyzed together based on their shared patterns of
categories and analysis types.
}
\examples{
\dontrun{
# Generate analysis sets for birth data
birth_sets <- chi_generate_analysis_set("birth")

# Generate analysis sets for BRFSS data
brfss_sets <- chi_generate_analysis_set("brfss")
}

}
\seealso{
\code{\link{chi_generate_tro_shell}} for generating TRO shell from these analysis sets
}
