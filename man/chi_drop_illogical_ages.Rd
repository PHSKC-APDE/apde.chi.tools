% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/chi_drop_illogical_ages.R
\name{chi_drop_illogical_ages}
\alias{chi_drop_illogical_ages}
\title{Filter Out Age Values That Don't Match Their Corresponding Age Group Categories}
\usage{
chi_drop_illogical_ages(ph.data, agevar = "chi_age")
}
\arguments{
\item{ph.data}{A data.table or data.frame containing category and age data to be filtered.}

\item{agevar}{Character string specifying the name of the age variable column.

Default: \code{agevar = 'chi_age'}}
}
\value{
A filtered data.table with only logically consistent age values
}
\description{
This function filters a data.table to remove rows with inconsistent age values.
It compares the single year age value (specified by \code{agevar}) against age
ranges defined in \code{cat1_group} and \code{cat2_group} columns, keeping only
those rows where:
\itemize{
  \item The categorical variable is not age-related, OR
  \item The age value falls within the range specified by the corresponding age group
}

Age groups are expected to be in formats like "10-17", "<5", or "45+", which
the function automatically parses into numeric ranges.
}
\details{
The function interprets special formats in age group strings:
\itemize{
  \item "<1" is treated as age "0-0" (age zero)
  \item "<N" is converted to "0-N" (ages 0 through N)
  \item "N+" is converted to "N-120" (ages N through 120)
}
}
\examples{
\dontrun{
# Assuming infmort_combo is a data.frame or data.table with age, cat1,
# cat1_group, cat2, cat2_group columns:

filtered_data <- chi_drop_illogical_ages(ph.data = infmort_combo, agevar = 'age')
}

}
\seealso{
\code{\link{chi_count_by_age}} and \code{\link{chi_get_proper_pop}} - This function
is typically applied to tables resulting from merging the output of these two functions.
}
